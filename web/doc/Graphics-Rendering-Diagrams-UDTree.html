<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Graphics.Rendering.Diagrams.UDTree</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Graphics-Rendering-Diagrams-UDTree.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Graphics-Rendering-Diagrams-UDTree.html">Source</a></li><li><a href="http://www.haskell.org/haskellwiki/Diagrams/Comments/Graphics.Rendering.Diagrams.UDTree">User Comments</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">diagrams-core-0.5: Core libraries for diagrams EDSL</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Maintainer</th><td>diagrams-discuss@googlegroups.com</td></tr><tr><th>Safe Haskell</th><td>Safe-Infered</td></tr></table><p class="caption">Graphics.Rendering.Diagrams.UDTree</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">UD-trees
</a></li><li><a href="#g:2">Constructing UD-trees
</a></li><li><a href="#g:3">Modifying UD-trees
</a></li><li><a href="#g:4">Accessors and destructors
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Rose (n-way) trees with both upwards- and downwards-traveling
 monoidal annotations, used as the basis for representing diagrams.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:UDTree">UDTree</a> u d a<ul class="subs"><li>= <a href="#v:Leaf">Leaf</a> u a  </li><li>| <a href="#v:Branch">Branch</a> u [d] [<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a]  </li></ul></li><li class="src short"><a href="#v:leaf">leaf</a> ::  u -&gt; a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a</li><li class="src short"><a href="#v:branchD">branchD</a> :: (<a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> u) =&gt; d -&gt; [<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a] -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a</li><li class="src short"><a href="#v:branch">branch</a> :: (<a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> d) =&gt; [<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a] -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a</li><li class="src short"><a href="#v:applyD">applyD</a> :: <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u =&gt; d -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a</li><li class="src short"><a href="#v:applyUpre">applyUpre</a> :: (<a href="http://hackage.haskell.org/packages/archive/semigroups/0.8/doc/html/Data-Semigroup.html#t:Semigroup">Semigroup</a> u, <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u) =&gt; u -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a</li><li class="src short"><a href="#v:applyUpost">applyUpost</a> :: (<a href="http://hackage.haskell.org/packages/archive/semigroups/0.8/doc/html/Data-Semigroup.html#t:Semigroup">Semigroup</a> u, <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u) =&gt; u -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a</li><li class="src short"><a href="#v:mapU">mapU</a> ::  (u -&gt; u') -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u' d a</li><li class="src short"><a href="#v:getU">getU</a> :: <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u =&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; u</li><li class="src short"><a href="#v:getU-39-">getU'</a> :: (<a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d (u' <a href="Graphics-Rendering-Diagrams-MList.html#t::::">:::</a> <a href="Graphics-Rendering-Diagrams-MList.html#t:Nil">Nil</a>), u <a href="Graphics-Rendering-Diagrams-MList.html#t::-62-:">:&gt;:</a> u') =&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; u'</li><li class="src short"><a href="#v:foldUD">foldUD</a> :: (<a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> r, <a href="http://hackage.haskell.org/packages/archive/semigroups/0.8/doc/html/Data-Semigroup.html#t:Semigroup">Semigroup</a> d, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> d, <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u) =&gt; (u -&gt; d -&gt; a -&gt; r) -&gt; (u -&gt; d -&gt; r -&gt; r) -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; r</li><li class="src short"><a href="#v:flatten">flatten</a> :: (<a href="http://hackage.haskell.org/packages/archive/semigroups/0.8/doc/html/Data-Semigroup.html#t:Semigroup">Semigroup</a> d, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> d, <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u) =&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; [(a, d)]</li></ul></div><div id="interface"><h1 id="g:1">UD-trees
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:UDTree" class="def">UDTree</a> u d a <a href="src/Graphics-Rendering-Diagrams-UDTree.html#UDTree" class="link">Source</a></p><div class="doc"><p>Abstractly, a UDTree is a rose (n-way) tree with data at the
   leaves and two types of monoidal annotations, one (called <code>u</code>)
   travelling &quot;up&quot; the tree and one (called <code>d</code>) traveling
   &quot;down&quot;.
</p><p>Specifically, every node (both leaf nodes and internal nodes)
   has two annotations, one of type <code>d</code> and one of type <code>u</code>,
   subject to the following constraints:
</p><ul><li> The <code>d</code> annotation at a leaf node is equal to the <code><a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#v:mconcat">mconcat</a></code> of
     all the <code>d</code> annotations along the path from the root to the leaf
     node.
</li><li> The <code>u</code> annotation at an internal node is equal to <code>v1
     `<code><a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#v:mappend">mappend</a></code>` (mconcat us) `<code><a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#v:mappend">mappend</a></code>` v2</code> for some values <code>v1</code>
     and <code>v2</code> (possibly <code><a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#v:mempty">mempty</a></code>), where <code>us</code> is the list (in
     left-right order) of the <code>u</code> annotations on the immediate child
     nodes of the given node.  Intuitively, we are &quot;caching&quot; the
     <code>mconcat</code> of <code>u</code> annotations from the leaves up, except that at
     any point we may insert &quot;extra&quot; information.
</li></ul><p>In addition, <code>d</code> may have an <em>action</em> on <code>u</code> (see the <code><a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a></code>
   type class, defined in <a href="Graphics-Rendering-Diagrams-Monoids.html">Graphics.Rendering.Diagrams.Monoids</a>), in
   which case applying a <code>d</code> annotation to a tree will transform all
   the <code>u</code> annotations by acting on them.  The constraints on <code>u</code>
   annotations are maintained since the action is required to be a
   monoid homomorphism.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Leaf" class="def">Leaf</a> u a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Branch" class="def">Branch</a> u [d] [<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:UDTree" class="caption collapser" onclick="toggleSection('i:UDTree')">Instances</p><div id="section.i:UDTree" class="show"><table><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Control-Monad.html#t:Functor">Functor</a> (<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> d) =&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> (<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a)</td><td class="doc"><p><code>UDTree</code>s form a monoid where <code>mappend</code> corresponds to adjoining
   two trees under a common parent root.  Note that this technically
   does not satisfy associativity, but it does with respect to
   <code><a href="Graphics-Rendering-Diagrams-UDTree.html#v:flatten">flatten</a></code> which is what we really care about.  <code>mconcat</code> is
   specialized to put all the trees under a single parent.
</p></td></tr><tr><td class="src">(<a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> d) =&gt; <a href="http://hackage.haskell.org/packages/archive/semigroups/0.8/doc/html/Data-Semigroup.html#t:Semigroup">Semigroup</a> (<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/newtype/0.2/doc/html/Control-Newtype.html#t:Newtype">Newtype</a> (<a href="Graphics-Rendering-Diagrams-Core.html#t:QDiagram">QDiagram</a> b v m) (<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> (<a href="Graphics-Rendering-Diagrams-Core.html#t:UpAnnots">UpAnnots</a> v m) (<a href="Graphics-Rendering-Diagrams-Core.html#t:DownAnnots">DownAnnots</a> v) (<a href="Graphics-Rendering-Diagrams-Core.html#t:Prim">Prim</a> b v))</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:2">Constructing UD-trees
</h1><div class="top"><p class="src"><a name="v:leaf" class="def">leaf</a> ::  u -&gt; a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a<a href="src/Graphics-Rendering-Diagrams-UDTree.html#leaf" class="link">Source</a></p><div class="doc"><p>Construct a leaf node from a <code>u</code> annotation and datum.
</p></div></div><div class="top"><p class="src"><a name="v:branchD" class="def">branchD</a> :: (<a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> u) =&gt; d -&gt; [<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a] -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a<a href="src/Graphics-Rendering-Diagrams-UDTree.html#branchD" class="link">Source</a></p><div class="doc"><p>Construct a branch node with an explicit <code>d</code> annotation.
</p></div></div><div class="top"><p class="src"><a name="v:branch" class="def">branch</a> :: (<a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> u, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> d) =&gt; [<a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a] -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a<a href="src/Graphics-Rendering-Diagrams-UDTree.html#branch" class="link">Source</a></p><div class="doc"><p>Construct a branch node with a default (identity) <code>d</code> annotation.
</p></div></div><h1 id="g:3">Modifying UD-trees
</h1><div class="top"><p class="src"><a name="v:applyD" class="def">applyD</a> :: <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u =&gt; d -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a<a href="src/Graphics-Rendering-Diagrams-UDTree.html#applyD" class="link">Source</a></p><div class="doc"><p>Add a <code>d</code> annotation to the root, combining it (on the left) with
   any pre-existing <code>d</code> annotation, and transforming all <code>u</code>
   annotations by the action of <code>d</code>.
</p></div></div><div class="top"><p class="src"><a name="v:applyUpre" class="def">applyUpre</a> :: (<a href="http://hackage.haskell.org/packages/archive/semigroups/0.8/doc/html/Data-Semigroup.html#t:Semigroup">Semigroup</a> u, <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u) =&gt; u -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a<a href="src/Graphics-Rendering-Diagrams-UDTree.html#applyUpre" class="link">Source</a></p><div class="doc"><p>Add a <code>u</code> annotation to the root, combining it (on the left) with
   the existing <code>u</code> annotation.
</p></div></div><div class="top"><p class="src"><a name="v:applyUpost" class="def">applyUpost</a> :: (<a href="http://hackage.haskell.org/packages/archive/semigroups/0.8/doc/html/Data-Semigroup.html#t:Semigroup">Semigroup</a> u, <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u) =&gt; u -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a<a href="src/Graphics-Rendering-Diagrams-UDTree.html#applyUpost" class="link">Source</a></p><div class="doc"><p>Add a <code>u</code> annotation to the root, combining it (on the right) with
   the existing <code>u</code> annotation.
</p></div></div><div class="top"><p class="src"><a name="v:mapU" class="def">mapU</a> ::  (u -&gt; u') -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u' d a<a href="src/Graphics-Rendering-Diagrams-UDTree.html#mapU" class="link">Source</a></p><div class="doc"><p>Map a function over all the <code>u</code> annotations.  The function must
   be a monoid homomorphism, and must commute with the action of <code>d</code>
   on <code>u</code>.  That is, to use <code>mapU f</code> safely it must be the case that
   <code>f (act d u) == act d (f u)</code>.
</p></div></div><h1 id="g:4">Accessors and destructors
</h1><div class="top"><p class="src"><a name="v:getU" class="def">getU</a> :: <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u =&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; u<a href="src/Graphics-Rendering-Diagrams-UDTree.html#getU" class="link">Source</a></p><div class="doc"><p>Get the <code>u</code> annotation at the root.
</p></div></div><div class="top"><p class="src"><a name="v:getU-39-" class="def">getU'</a> :: (<a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d (u' <a href="Graphics-Rendering-Diagrams-MList.html#t::::">:::</a> <a href="Graphics-Rendering-Diagrams-MList.html#t:Nil">Nil</a>), u <a href="Graphics-Rendering-Diagrams-MList.html#t::-62-:">:&gt;:</a> u') =&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; u'<a href="src/Graphics-Rendering-Diagrams-UDTree.html#getU%27" class="link">Source</a></p><div class="doc"><p>Get a particular component from a the <code>u</code> annotation at the root.
   This method is provided for convenience, since its context only
   requires an action of <code>d</code> on <code>u'</code>, rather than on <code>u</code> in its
   entirety.
</p></div></div><div class="top"><p class="src"><a name="v:foldUD" class="def">foldUD</a><a href="src/Graphics-Rendering-Diagrams-UDTree.html#foldUD" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> r, <a href="http://hackage.haskell.org/packages/archive/semigroups/0.8/doc/html/Data-Semigroup.html#t:Semigroup">Semigroup</a> d, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> d, <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (u -&gt; d -&gt; a -&gt; r)</td><td class="doc"><p>Function for processing leaf nodes.
   Given the u annotation at this node, the
   <code><a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#v:mconcat">mconcat</a></code> of all d annotations above, and the
   leaf value.
</p></td></tr><tr><td class="src">-&gt; (u -&gt; d -&gt; r -&gt; r)</td><td class="doc"><p>Function for processing internal
   nodes.  Given the u and d
   annotations at this node and the
   <code><a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#v:mconcat">mconcat</a></code> of the recursive results.
</p></td></tr><tr><td class="src">-&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; r</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>A fold for UDTrees.
</p></div></div><div class="top"><p class="src"><a name="v:flatten" class="def">flatten</a> :: (<a href="http://hackage.haskell.org/packages/archive/semigroups/0.8/doc/html/Data-Semigroup.html#t:Semigroup">Semigroup</a> d, <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> d, <a href="Graphics-Rendering-Diagrams-Monoids.html#t:Action">Action</a> d u) =&gt; <a href="Graphics-Rendering-Diagrams-UDTree.html#t:UDTree">UDTree</a> u d a -&gt; [(a, d)]<a href="src/Graphics-Rendering-Diagrams-UDTree.html#flatten" class="link">Source</a></p><div class="doc"><p>A specialized fold provided for convenience: flatten a tree into
   a list of leaves along with their <code>d</code> annotations.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.10.0</p></div></body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Diagrams.Backend.Cairo.Text</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Diagrams-Backend-Cairo-Text.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Diagrams-Backend-Cairo-Text.html">Source</a></li><li><a href="http://www.haskell.org/haskellwiki/Diagrams/Comments/Diagrams.Backend.Cairo.Text">User Comments</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">diagrams-cairo-0.5: Cairo backend for diagrams drawing EDSL</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Maintainer</th><td>diagrams-discuss@googlegroups.com</td></tr><tr><th>Safe Haskell</th><td>Safe-Infered</td></tr></table><p class="caption">Diagrams.Backend.Cairo.Text</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Cairo Utilities
</a></li><li><a href="#g:2">Extents
</a><ul><li><a href="#g:3">Data Structures
</a></li><li><a href="#g:4">Queries
</a></li></ul></li><li><a href="#g:5">Primitives
</a></li><li><a href="#g:6">Unsafe
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides convenience functions for querying information from
 Cairo.  In particular, this provides utilities for information about fonts,
 and creating text primitives with bounds based on the font being used.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:queryCairo">queryCairo</a> ::  <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> a -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:unsafeCairo">unsafeCairo</a> ::  <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> a -&gt; a</li><li class="src short"><span class="keyword">type</span> <a href="#t:StyleParam">StyleParam</a> = <span class="keyword">forall</span> a. <a href="Graphics-Rendering-Diagrams-Style.html#t:HasStyle">HasStyle</a> a =&gt; a -&gt; a</li><li class="src short"><a href="#v:cairoWithStyle">cairoWithStyle</a> ::  <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> a -&gt; <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> a</li><li class="src short"><span class="keyword">data</span>  <a href="#t:TextExtents">TextExtents</a>  = <a href="#v:TextExtents">TextExtents</a> {<ul class="subs"><li><a href="#v:bearing">bearing</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></li><li><a href="#v:textSize">textSize</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></li><li><a href="#v:advance">advance</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></li></ul>}</li><li class="src short"><span class="keyword">data</span>  <a href="#t:FontExtents">FontExtents</a>  = <a href="#v:FontExtents">FontExtents</a> {<ul class="subs"><li><a href="#v:ascent">ascent</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a></li><li><a href="#v:descent">descent</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a></li><li><a href="#v:height">height</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a></li><li><a href="#v:maxAdvance">maxAdvance</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></li></ul>}</li><li class="src short"><a href="#v:getTextExtents">getTextExtents</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> <a href="Diagrams-Backend-Cairo-Text.html#t:TextExtents">TextExtents</a></li><li class="src short"><a href="#v:getFontExtents">getFontExtents</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> <a href="Diagrams-Backend-Cairo-Text.html#t:FontExtents">FontExtents</a></li><li class="src short"><a href="#v:getExtents">getExtents</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> (<a href="Diagrams-Backend-Cairo-Text.html#t:FontExtents">FontExtents</a>, <a href="Diagrams-Backend-Cairo-Text.html#t:TextExtents">TextExtents</a>)</li><li class="src short"><a href="#v:kerningCorrectionIO">kerningCorrectionIO</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Char.html#t:Char">Char</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Char.html#t:Char">Char</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/System-IO.html#t:IO">IO</a> <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a></li><li class="src short"><a href="#v:textLineBoundedIO">textLineBoundedIO</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="Graphics-Rendering-Diagrams-Core.html#t:Diagram">Diagram</a> <a href="Diagrams-Backend-Cairo-Internal.html#t:Cairo">Cairo</a> <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>)</li><li class="src short"><a href="#v:textVisualBoundedIO">textVisualBoundedIO</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="Graphics-Rendering-Diagrams-Core.html#t:Diagram">Diagram</a> <a href="Diagrams-Backend-Cairo-Internal.html#t:Cairo">Cairo</a> <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>)</li><li class="src short"><a href="#v:kerningCorrection">kerningCorrection</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Char.html#t:Char">Char</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Char.html#t:Char">Char</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a></li><li class="src short"><a href="#v:textLineBounded">textLineBounded</a>, <a href="#v:textVisualBounded">textVisualBounded</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="Graphics-Rendering-Diagrams-Core.html#t:Diagram">Diagram</a> <a href="Diagrams-Backend-Cairo-Internal.html#t:Cairo">Cairo</a> <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></li></ul></div><div id="interface"><h1 id="g:1">Cairo Utilities
</h1><div class="top"><p class="src"><a name="v:queryCairo" class="def">queryCairo</a> ::  <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> a -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/System-IO.html#t:IO">IO</a> a<a href="src/Diagrams-Backend-Cairo-Text.html#queryCairo" class="link">Source</a></p><div class="doc"><p>Executes a cairo action on a dummy, zero-size image surface, in order to
   query things like font information.
</p></div></div><div class="top"><p class="src"><a name="v:unsafeCairo" class="def">unsafeCairo</a> ::  <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> a -&gt; a<a href="src/Diagrams-Backend-Cairo-Text.html#unsafeCairo" class="link">Source</a></p><div class="doc"><p>Unsafely invokes <code>queryCairo</code>.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:StyleParam" class="def">StyleParam</a> = <span class="keyword">forall</span> a. <a href="Graphics-Rendering-Diagrams-Style.html#t:HasStyle">HasStyle</a> a =&gt; a -&gt; a<a href="src/Diagrams-Backend-Cairo-Text.html#StyleParam" class="link">Source</a></p><div class="doc"><p>Existential type for mutations on objects that &quot;have style&quot;. This is
   used as a parameter to <code>getTextExtents</code> and <code>getFontExtents</code> in order to
   set font-size and font-face.
</p></div></div><div class="top"><p class="src"><a name="v:cairoWithStyle" class="def">cairoWithStyle</a> ::  <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> a -&gt; <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> a<a href="src/Diagrams-Backend-Cairo-Text.html#cairoWithStyle" class="link">Source</a></p><div class="doc"><p>Executes the given cairo action, with styling applied.
   This does not do all styling - just attributes that are processed by
   &quot;cairoMiscStyle&quot;, which does clip, fill color, fill rule, and,
   importantly for this module, font face, style, and weight.
</p></div></div><h1 id="g:2">Extents
</h1><h2 id="g:3">Data Structures
</h2><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:TextExtents" class="def">TextExtents</a>  <a href="src/Diagrams-Backend-Cairo-Text.html#TextExtents" class="link">Source</a></p><div class="doc"><p>A more convenient data structure for the results of a text-extents query.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:TextExtents" class="def">TextExtents</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:bearing" class="def">bearing</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:textSize" class="def">textSize</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:advance" class="def">advance</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:FontExtents" class="def">FontExtents</a>  <a href="src/Diagrams-Backend-Cairo-Text.html#FontExtents" class="link">Source</a></p><div class="doc"><p>A more convenient data structure for the results of a font-extents query.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:FontExtents" class="def">FontExtents</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:ascent" class="def">ascent</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:descent" class="def">descent</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:height" class="def">height</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:maxAdvance" class="def">maxAdvance</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><h2 id="g:4">Queries
</h2><div class="top"><p class="src"><a name="v:getTextExtents" class="def">getTextExtents</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> <a href="Diagrams-Backend-Cairo-Text.html#t:TextExtents">TextExtents</a><a href="src/Diagrams-Backend-Cairo-Text.html#getTextExtents" class="link">Source</a></p><div class="doc"><p>Get the extents of a string of text, given a style to render it with.
</p></div></div><div class="top"><p class="src"><a name="v:getFontExtents" class="def">getFontExtents</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> <a href="Diagrams-Backend-Cairo-Text.html#t:FontExtents">FontExtents</a><a href="src/Diagrams-Backend-Cairo-Text.html#getFontExtents" class="link">Source</a></p><div class="doc"><p>Gets the intrinsic extents of a font.
</p></div></div><div class="top"><p class="src"><a name="v:getExtents" class="def">getExtents</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/cairo/0.12.2/doc/html/Graphics-Rendering-Cairo.html#t:Render">Render</a> (<a href="Diagrams-Backend-Cairo-Text.html#t:FontExtents">FontExtents</a>, <a href="Diagrams-Backend-Cairo-Text.html#t:TextExtents">TextExtents</a>)<a href="src/Diagrams-Backend-Cairo-Text.html#getExtents" class="link">Source</a></p><div class="doc"><p>Gets both the <a href="FontExtents.html">FontExtents</a> and <a href="TextExtents.html">TextExtents</a> of the string with the a
   particular style applied.  This is more efficient than calling both
   <code>getFontExtents</code> and <code>getTextExtents</code>.
</p></div></div><div class="top"><p class="src"><a name="v:kerningCorrectionIO" class="def">kerningCorrectionIO</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Char.html#t:Char">Char</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Char.html#t:Char">Char</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/System-IO.html#t:IO">IO</a> <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a><a href="src/Diagrams-Backend-Cairo-Text.html#kerningCorrectionIO" class="link">Source</a></p><div class="doc"><p>Queries the amount of horizontal offset that needs to be applied in order to
   position the second character properly, in the event that it is <code>hcat</code>-ed
   <code>baselineText</code>.
</p></div></div><h1 id="g:5">Primitives
</h1><div class="doc"><p>These create diagrams instantiated with extents-based envelopes
</p></div><div class="top"><p class="src"><a name="v:textLineBoundedIO" class="def">textLineBoundedIO</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="Graphics-Rendering-Diagrams-Core.html#t:Diagram">Diagram</a> <a href="Diagrams-Backend-Cairo-Internal.html#t:Cairo">Cairo</a> <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>)<a href="src/Diagrams-Backend-Cairo-Text.html#textLineBoundedIO" class="link">Source</a></p><div class="doc"><p>Creates text diagrams with their envelopes set such that using
   <code>vcat . map (textLineBounded style)</code> stacks them in the way that
   the font designer intended.
</p></div></div><div class="top"><p class="src"><a name="v:textVisualBoundedIO" class="def">textVisualBoundedIO</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="Graphics-Rendering-Diagrams-Core.html#t:Diagram">Diagram</a> <a href="Diagrams-Backend-Cairo-Internal.html#t:Cairo">Cairo</a> <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>)<a href="src/Diagrams-Backend-Cairo-Text.html#textVisualBoundedIO" class="link">Source</a></p><div class="doc"><p>Creates a text diagram with its envelope set to enclose the glyphs of the text,
   including leading (though not trailing) whitespace.
</p></div></div><h1 id="g:6">Unsafe
</h1><div class="doc"><p>These are convenient unsafe variants of the above operations
   postfixed with &quot;IO&quot;. They should be pretty well-behaved as the
   results just depend on the parameters and the font information
   (which ought to stay the same during a given execution).
</p></div><div class="top"><p class="src"><a name="v:kerningCorrection" class="def">kerningCorrection</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Char.html#t:Char">Char</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Char.html#t:Char">Char</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#t:Double">Double</a><a href="src/Diagrams-Backend-Cairo-Text.html#kerningCorrection" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:textLineBounded" class="def">textLineBounded</a>, <a name="v:textVisualBounded" class="def">textVisualBounded</a> :: <a href="Diagrams-Backend-Cairo-Text.html#t:StyleParam">StyleParam</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="Graphics-Rendering-Diagrams-Core.html#t:Diagram">Diagram</a> <a href="Diagrams-Backend-Cairo-Internal.html#t:Cairo">Cairo</a> <a href="Diagrams-TwoD-Types.html#t:R2">R2</a><a href="src/Diagrams-Backend-Cairo-Text.html#textLineBounded" class="link">Source</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.10.0</p></div></body></html>